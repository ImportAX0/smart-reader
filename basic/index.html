<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½é˜…è¯»å™¨ - æç®€è§†è§‰å¢å¼º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 24px 30px;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .header p {
            opacity: 0.85;
            font-size: 14px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .input-section, .preview-section {
            padding: 30px;
        }

        .input-section {
            border-right: 1px solid #e8e8e8;
            background: #fafafa;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
        }

        #inputText {
            width: 100%;
            height: 350px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            line-height: 1.8;
            resize: vertical;
            font-family: inherit;
            background: white;
        }

        #inputText:focus {
            outline: none;
            border-color: #2c3e50;
        }

        .controls {
            margin-top: 20px;
        }

        .mode-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 10px;
            border: 1.5px solid #ddd;
            background: white;
            color: #666;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .mode-btn:hover {
            border-color: #2c3e50;
            color: #2c3e50;
        }

        .mode-btn.active {
            background: #2c3e50;
            color: white;
            border-color: #2c3e50;
        }

        .advanced-toggle {
            margin-top: 15px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            font-size: 13px;
            color: #666;
            transition: background 0.2s;
        }

        .advanced-toggle:hover {
            background: #e5e5e5;
        }

        .advanced-controls {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .advanced-controls.open {
            max-height: 500px;
        }

        .control-group {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e8e8e8;
        }

        .control-label {
            font-size: 13px;
            font-weight: 500;
            color: #555;
            margin-bottom: 10px;
            display: block;
        }

        .slider-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .slider-group:last-child {
            margin-bottom: 0;
        }

        .slider-label {
            min-width: 70px;
            font-size: 12px;
            color: #777;
        }

        input[type="range"] {
            flex: 1;
            height: 4px;
            border-radius: 2px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #2c3e50;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #2c3e50;
            cursor: pointer;
            border: none;
        }

        .value-display {
            min-width: 45px;
            text-align: right;
            font-size: 12px;
            color: #999;
            font-family: monospace;
        }

        #preview {
            line-height: 2.2;
            font-size: 17px;
            color: #1a1a1a;
            padding: 20px;
            background: white;
            border-radius: 6px;
            min-height: 400px;
            border: 1px solid #e8e8e8;
        }

        .placeholder {
            color: #bbb;
            font-style: italic;
            text-align: center;
            padding-top: 80px;
        }

        .tips {
            margin-top: 15px;
            padding: 12px;
            background: #fff9e6;
            border-left: 3px solid #ffc107;
            border-radius: 4px;
            font-size: 13px;
            color: #856404;
            line-height: 1.6;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid #e8e8e8;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>æ™ºèƒ½é˜…è¯»å™¨</h1>
            <p>é€šè¿‡ç®€æ´çš„è§†è§‰å¢å¼ºï¼Œè®©é˜…è¯»æ›´é«˜æ•ˆ</p>
        </div>

        <div class="main-content">
            <div class="input-section">
                <div class="section-title">è¾“å…¥æ–‡æœ¬</div>
                <textarea id="inputText" placeholder="åœ¨è¿™é‡Œç²˜è´´æˆ–è¾“å…¥æ–‡æœ¬...">åœ¨é¥è¿œçš„æœªæ¥ï¼Œäººç±»å·²ç»æŒæ¡äº†æ˜Ÿé™…æ—…è¡Œçš„æŠ€æœ¯ã€‚å®‡èˆªå‘˜å¼ ä¼Ÿé©¾é©¶ç€æœ€å…ˆè¿›çš„é£èˆ¹ï¼Œç©¿è¶Šäº†æ— æ•°æ˜Ÿç³»ã€‚ä»–çš„ä»»åŠ¡æ˜¯å¯»æ‰¾é€‚åˆäººç±»å±…ä½çš„æ–°æ˜Ÿçƒã€‚ç»è¿‡æ¼«é•¿çš„æ—…ç¨‹ï¼Œä»–ç»ˆäºå‘ç°äº†ä¸€é¢—ç¾ä¸½çš„è“è‰²æ˜Ÿçƒã€‚è¿™é¢—æ˜Ÿçƒä¸Šæœ‰æ¸…æ¾ˆçš„æ°´æºå’ŒèŒ‚å¯†çš„æ£®æ—ï¼Œç®€ç›´å°±æ˜¯äººç±»æ¢¦å¯ä»¥æ±‚çš„æ–°å®¶å›­ã€‚

The spacecraft traveled at incredible speeds through the cosmos. Advanced technology allowed humans to explore distant galaxies. Scientists discovered water and oxygen on the planet.</textarea>

                <div class="controls">
                    <div class="section-title" style="margin-top: 20px;">å¿«é€Ÿæ¨¡å¼</div>
                    <div class="mode-selector">
                        <button class="mode-btn" onclick="applyMode('minimal')">æç®€</button>
                        <button class="mode-btn active" onclick="applyMode('classic')">ç»å…¸</button>
                        <button class="mode-btn" onclick="applyMode('strong')">å¼ºåŒ–</button>
                    </div>

                    <div class="advanced-toggle" onclick="toggleAdvanced()">
                        <span id="toggleText">â–¼ å±•å¼€é«˜çº§è®¾ç½®</span>
                    </div>

                    <div class="advanced-controls" id="advancedControls">
                        <div class="control-group">
                            <div class="control-label">å…³é”®å†…å®¹ï¼ˆåè¯ã€åŠ¨è¯ï¼‰</div>
                            <div class="slider-group">
                                <span class="slider-label">è‰²è°ƒ</span>
                                <input type="color" id="keywordColor" value="#1a1a1a" style="width: 50px; height: 30px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
                                <span style="font-size: 11px; color: #999; margin-left: 8px;">ğŸ’¡ è¯•è¯• #2a1a1a (åçº¢) æˆ– #1a1a2a (åè“)</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">å­—å·</span>
                                <input type="range" id="keywordSize" min="80" max="140" value="110">
                                <span class="value-display" id="keywordSizeValue">110%</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">ç²—ç»†</span>
                                <input type="range" id="keywordWeight" min="400" max="700" value="600" step="100">
                                <span class="value-display" id="keywordWeightValue">600</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">é¢œè‰²æ·±åº¦</span>
                                <input type="range" id="keywordOpacity" min="70" max="100" value="95">
                                <span class="value-display" id="keywordOpacityValue">95%</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">æ¬¡è¦å†…å®¹ï¼ˆè¿è¯ã€ä»‹è¯ï¼‰</div>
                            <div class="slider-group">
                                <span class="slider-label">è‰²è°ƒ</span>
                                <input type="color" id="minorColor" value="#666666" style="width: 50px; height: 30px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
                                <span style="font-size: 11px; color: #999; margin-left: 8px;">ğŸ’¡ è¯•è¯• #665555 (åæš–) æˆ– #556666 (åå†·)</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">å­—å·</span>
                                <input type="range" id="minorSize" min="60" max="100" value="85">
                                <span class="value-display" id="minorSizeValue">85%</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">ç²—ç»†</span>
                                <input type="range" id="minorWeight" min="300" max="500" value="400" step="100">
                                <span class="value-display" id="minorWeightValue">400</span>
                            </div>
                            <div class="slider-group">
                                <span class="slider-label">é¢œè‰²æ·±åº¦</span>
                                <input type="range" id="minorOpacity" min="20" max="70" value="40">
                                <span class="value-display" id="minorOpacityValue">40%</span>
                            </div>
                        </div>
                    </div>

                    <div class="tips">
                        ğŸ’¡ <strong>æç¤ºï¼š</strong>æ”¯æŒä¸­è‹±æ–‡æ··åˆæ–‡æœ¬ã€‚"ç»å…¸"æ¨¡å¼æ¨¡æ‹Ÿäº†å¸–å­ä¸­çœ‹åˆ°çš„æ•ˆæœâ€”â€”åªç”¨é»‘ç™½ç°ï¼Œé€šè¿‡å­—å·å’Œç²—ç»†æ¥åŒºåˆ†é‡è¦ç¨‹åº¦ã€‚
                    </div>
                </div>
            </div>

            <div class="preview-section">
                <div class="section-title">å®æ—¶é¢„è§ˆ</div>
                <div id="preview">
                    <div class="placeholder">åœ¨å·¦ä¾§è¾“å…¥æ–‡æœ¬åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå¢å¼ºæ•ˆæœ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'classic';

        // ç®€åŒ–çš„ä¸­æ–‡åˆ†è¯
        function simpleSegment(text) {
            const result = [];
            
            // è¿è¯ã€ä»‹è¯ã€åŠ©è¯
            const minorWords = ['çš„', 'åœ°', 'å¾—', 'å’Œ', 'ä¸', 'æˆ–', 'è€Œ', 'ä½†', 'å› ä¸º', 'æ‰€ä»¥', 'å¦‚æœ', 'é‚£ä¹ˆ', 'åœ¨', 'ä»', 'åˆ°', 'å¯¹', 'å‘', 'ä»¥', 'è¢«', 'æŠŠ', 'äº†', 'ç€', 'è¿‡', 'æ˜¯', 'æœ‰', 'the', 'a', 'an', 'and', 'or', 'but', 'of', 'to', 'in', 'on', 'at', 'for', 'with', 'by', 'from', 'as', 'it', 'is', 'was', 'are', 'were', 'been', 'be'];
            
            // å¸¸è§åŠ¨è¯
            const verbs = ['è¯´', 'åš', 'å»', 'æ¥', 'çœ‹', 'æƒ³', 'çŸ¥é“', 'æˆä¸º', 'ä½¿ç”¨', 'å‘ç°', 'æŒæ¡', 'é©¾é©¶', 'ç©¿è¶Š', 'å¯»æ‰¾', 'ç»è¿‡', 'å…è®¸', 'travel', 'discover', 'explore', 'allow', 'find'];
            
            let i = 0;
            while (i < text.length) {
                const char = text[i];
                
                // æ ‡ç‚¹ç¬¦å·
                if (/[\sï¼Œã€‚ï¼ï¼Ÿã€ï¼›ï¼š""''ï¼ˆï¼‰ã€Šã€‹ã€ã€‘â€¦â€”,.!?;:()\[\]{}"'\-]/.test(char)) {
                    result.push({ word: char, type: 'punct' });
                    i++;
                    continue;
                }
                
                // è‹±æ–‡å•è¯
                if (/[a-zA-Z]/.test(char)) {
                    let word = '';
                    while (i < text.length && /[a-zA-Z]/.test(text[i])) {
                        word += text[i];
                        i++;
                    }
                    const lowerWord = word.toLowerCase();
                    if (minorWords.includes(lowerWord)) {
                        result.push({ word: word, type: 'minor' });
                    } else if (verbs.includes(lowerWord)) {
                        result.push({ word: word, type: 'key' });
                    } else {
                        result.push({ word: word, type: 'key' });
                    }
                    continue;
                }
                
                // æ•°å­—
                if (/\d/.test(char)) {
                    let word = '';
                    while (i < text.length && /[\d.]/.test(text[i])) {
                        word += text[i];
                        i++;
                    }
                    result.push({ word: word, type: 'key' });
                    continue;
                }
                
                // å°è¯•åŒ¹é…å¤šå­—è¯
                let matched = false;
                for (let len = 3; len >= 2; len--) {
                    const substr = text.substr(i, len);
                    if (minorWords.includes(substr)) {
                        result.push({ word: substr, type: 'minor' });
                        i += len;
                        matched = true;
                        break;
                    } else if (verbs.includes(substr)) {
                        result.push({ word: substr, type: 'key' });
                        i += len;
                        matched = true;
                        break;
                    }
                }
                
                if (!matched) {
                    // å•å­—åˆ¤æ–­
                    if (minorWords.includes(char)) {
                        result.push({ word: char, type: 'minor' });
                    } else if (verbs.includes(char)) {
                        result.push({ word: char, type: 'key' });
                    } else {
                        result.push({ word: char, type: 'key' });
                    }
                    i++;
                }
            }
            
            return result;
        }

        function processText() {
            const text = document.getElementById('inputText').value;
            const preview = document.getElementById('preview');
            
            if (!text.trim()) {
                preview.innerHTML = '<div class="placeholder">åœ¨å·¦ä¾§è¾“å…¥æ–‡æœ¬åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå¢å¼ºæ•ˆæœ</div>';
                return;
            }
            
            // è·å–è®¾ç½®
            const keyColor = document.getElementById('keywordColor').value;
            const keySize = document.getElementById('keywordSize').value;
            const keyWeight = document.getElementById('keywordWeight').value;
            const keyOpacity = document.getElementById('keywordOpacity').value / 100;
            
            const minorColor = document.getElementById('minorColor').value;
            const minorSize = document.getElementById('minorSize').value;
            const minorWeight = document.getElementById('minorWeight').value;
            const minorOpacity = document.getElementById('minorOpacity').value / 100;
            
            // æŒ‰æ®µè½åˆ†å‰²å¤„ç†
            const paragraphs = text.split('\n');
            let html = '';
            
            paragraphs.forEach((para, index) => {
                if (para.trim() === '') {
                    // ç©ºè¡Œä¿ç•™
                    html += '<br>';
                } else {
                    // å¤„ç†æ¯ä¸ªæ®µè½
                    const segments = simpleSegment(para);
                    
                    segments.forEach(seg => {
                        if (seg.type === 'key') {
                            // å°†hexé¢œè‰²è½¬æ¢ä¸ºrgba
                            const r = parseInt(keyColor.substr(1,2), 16);
                            const g = parseInt(keyColor.substr(3,2), 16);
                            const b = parseInt(keyColor.substr(5,2), 16);
                            const color = `rgba(${r}, ${g}, ${b}, ${keyOpacity})`;
                            html += `<span style="font-size: ${keySize}%; font-weight: ${keyWeight}; color: ${color};">${seg.word}</span>`;
                        } else if (seg.type === 'minor') {
                            const r = parseInt(minorColor.substr(1,2), 16);
                            const g = parseInt(minorColor.substr(3,2), 16);
                            const b = parseInt(minorColor.substr(5,2), 16);
                            const color = `rgba(${r}, ${g}, ${b}, ${minorOpacity})`;
                            html += `<span style="font-size: ${minorSize}%; font-weight: ${minorWeight}; color: ${color};">${seg.word}</span>`;
                        } else {
                            html += seg.word;
                        }
                    });
                    
                    // æ®µè½ä¹‹é—´æ¢è¡Œï¼ˆé™¤äº†æœ€åä¸€æ®µï¼‰
                    if (index < paragraphs.length - 1) {
                        html += '<br>';
                    }
                }
            });
            
            preview.innerHTML = html;
        }

        function applyMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (mode === 'minimal') {
                // æç®€ï¼šå·®å¼‚å¾ˆå°
                document.getElementById('keywordSize').value = 105;
                document.getElementById('keywordWeight').value = 500;
                document.getElementById('keywordOpacity').value = 90;
                document.getElementById('minorSize').value = 90;
                document.getElementById('minorWeight').value = 400;
                document.getElementById('minorOpacity').value = 50;
            } else if (mode === 'classic') {
                // ç»å…¸ï¼šæ¨¡æ‹Ÿå¸–å­æ•ˆæœ
                document.getElementById('keywordSize').value = 110;
                document.getElementById('keywordWeight').value = 600;
                document.getElementById('keywordOpacity').value = 95;
                document.getElementById('minorSize').value = 85;
                document.getElementById('minorWeight').value = 400;
                document.getElementById('minorOpacity').value = 40;
            } else if (mode === 'strong') {
                // å¼ºåŒ–ï¼šå·®å¼‚å¾ˆæ˜æ˜¾
                document.getElementById('keywordSize').value = 120;
                document.getElementById('keywordWeight').value = 700;
                document.getElementById('keywordOpacity').value = 100;
                document.getElementById('minorSize').value = 75;
                document.getElementById('minorWeight').value = 300;
                document.getElementById('minorOpacity').value = 30;
            }
            
            updateDisplays();
            processText();
        }

        function toggleAdvanced() {
            const controls = document.getElementById('advancedControls');
            const toggleText = document.getElementById('toggleText');
            
            if (controls.classList.contains('open')) {
                controls.classList.remove('open');
                toggleText.textContent = 'â–¼ å±•å¼€é«˜çº§è®¾ç½®';
            } else {
                controls.classList.add('open');
                toggleText.textContent = 'â–² æ”¶èµ·é«˜çº§è®¾ç½®';
            }
        }

        function updateDisplays() {
            document.getElementById('keywordSizeValue').textContent = document.getElementById('keywordSize').value + '%';
            document.getElementById('keywordWeightValue').textContent = document.getElementById('keywordWeight').value;
            document.getElementById('keywordOpacityValue').textContent = document.getElementById('keywordOpacity').value + '%';
            
            document.getElementById('minorSizeValue').textContent = document.getElementById('minorSize').value + '%';
            document.getElementById('minorWeightValue').textContent = document.getElementById('minorWeight').value;
            document.getElementById('minorOpacityValue').textContent = document.getElementById('minorOpacity').value + '%';
        }

        // ç»‘å®šäº‹ä»¶
        document.getElementById('inputText').addEventListener('input', processText);
        
        ['keywordColor', 'keywordSize', 'keywordWeight', 'keywordOpacity',
         'minorColor', 'minorSize', 'minorWeight', 'minorOpacity'].forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                updateDisplays();
                processText();
            });
        });

        // åˆå§‹åŒ–
        updateDisplays();
        processText();
    </script>
</body>
</html>
